# ========= 数据源 =========
# PROVIDER：数据源提供商。当前只支持 twelvedata。
PROVIDER=twelvedata

# TWELVEDATA_API_KEYS：多个 API Key（逗号分隔），程序会轮询+故障切换。
TWELVEDATA_API_KEYS=KEY1,KEY2,KEY3

# TWELVEDATA_API_KEY：单 Key 兼容字段；通常不需要与上面同时维护。
# 仅当 TWELVEDATA_API_KEYS 为空时才会使用。
# TWELVEDATA_API_KEY=KEY1

# TWELVEDATA_SYMBOL：监控标的。
TWELVEDATA_SYMBOL=XAU/USD

# ========= 轮询与状态 =========
# POLL_SECONDS：轮询间隔（秒）。
# 调大：请求更少、更省额度，但信号更慢。调小：更实时，但更耗额度。
POLL_SECONDS=60

# COOLDOWN_MINUTES：提醒冷却时间（分钟）。
# 调大：减少重复提醒。调小：提醒更频繁。
COOLDOWN_MINUTES=20

# BUY_COOLDOWN_BYPASS_ON_FRESH_LOW：买入是否允许“新低豁免冷却”（1/0）。
# 开启后，当出现足够新且足够贴近会话低点的买入信号时，可突破 COOLDOWN 立即提醒。
BUY_COOLDOWN_BYPASS_ON_FRESH_LOW=0

# BUY_BYPASS_LOW_MAX_AGE_MIN：新低豁免时，低点最大年龄（分钟）。
BUY_BYPASS_LOW_MAX_AGE_MIN=15

# BUY_BYPASS_DIST_FROM_SESSION_LOW_PCT：新低豁免时，距会话低点最大允许偏离（%）。
BUY_BYPASS_DIST_FROM_SESSION_LOW_PCT=0.45

# BUY_BYPASS_MIN_NEW_LOW_DROP_PCT：相对上一次买入，要求会话低点至少再下破这么多（%）才豁免。
BUY_BYPASS_MIN_NEW_LOW_DROP_PCT=0.05

# BUY_FIRST_ALERT_MIN_REBOUND_PCT：每个会话“首个买点”最小反弹要求（%）。
BUY_FIRST_ALERT_MIN_REBOUND_PCT=0.12

# BUY_FIRST_ALERT_MAX_DIST_FROM_SESSION_LOW_PCT：首个买点可直接放行的“贴近低点”阈值（%）。
BUY_FIRST_ALERT_MAX_DIST_FROM_SESSION_LOW_PCT=0.05

# BUY_FIRST_ALERT_MIN_LOW_AGE_MIN：首个买点低点年龄达到该值时，可放宽距离要求（分钟）。
BUY_FIRST_ALERT_MIN_LOW_AGE_MIN=20

# BUY_FIRST_ALERT_MAX_DIST_WITH_AGE_PCT：配合上面的低点年龄条件时，允许的最大距离阈值（%）。
BUY_FIRST_ALERT_MAX_DIST_WITH_AGE_PCT=0.10

# BUY_HTF_SLOPE_WINDOW_MIN：买入高周期斜率窗口（分钟，<=1 关闭）。
# 调大：更强调中高周期趋势；调小：更敏感。
BUY_HTF_SLOPE_WINDOW_MIN=60

# BUY_HTF_SLOPE_MIN_PCT_PER_MIN：买入高周期斜率硬过滤下限（%/min）。
# 当高周期斜率低于该值（跌太快）时直接过滤买点；设更负会更宽松。
# 建议：设为 -1 可近似关闭该过滤（默认关闭）。
BUY_HTF_SLOPE_MIN_PCT_PER_MIN=-1.0

# BUY_SOFT_DOWNTREND_SLOPE_PCT_PER_MIN：买入“中等下跌态”判定阈值（%/min）。
# 低于该值但未触发硬过滤时，自动加严买入门槛。
# 建议：设为 -1 可关闭下跌态加严（默认关闭）。
BUY_SOFT_DOWNTREND_SLOPE_PCT_PER_MIN=-1.0

# BUY_SOFT_DOWNTREND_REBOUND_BOOST_PCT：下跌态下额外提高的最小反弹阈值（%）。
BUY_SOFT_DOWNTREND_REBOUND_BOOST_PCT=0

# BUY_SOFT_DOWNTREND_STALL_BOOST_MIN：下跌态下额外增加的停跌参考分钟。
BUY_SOFT_DOWNTREND_STALL_BOOST_MIN=0

# BUY_SOFT_DOWNTREND_SCORE_BOOST：下跌态下额外提高的积分阈值。
BUY_SOFT_DOWNTREND_SCORE_BOOST=0

# BUY_SOFT_DOWNTREND_SHORT_SLOPE_MIN_PCT_PER_MIN：下跌态下短周期斜率最小值（%/min）。
# 小于该值视为“尚未止跌”直接过滤；0 表示至少转平/转正才允许。
BUY_SOFT_DOWNTREND_SHORT_SLOPE_MIN_PCT_PER_MIN=-1.0

# BUY_HARD_FILTER_NEAR_SESSION_LOW_BYPASS_PCT：硬过滤豁免时，距会话低点最大偏离（%）。
BUY_HARD_FILTER_NEAR_SESSION_LOW_BYPASS_PCT=0.05

# BUY_HARD_FILTER_BYPASS_REBOUND_PCT：硬过滤豁免时，要求最小反弹（%）。
BUY_HARD_FILTER_BYPASS_REBOUND_PCT=0.12

# STATE_FILE：跨重启保存状态（目前保存 last_alert_at）。
# 影响：路径改错会导致重启后冷却状态丢失。
STATE_FILE=.goldx_state.json

# DRY_RUN：1=只打印不发邮件，0=正常发送。
# 影响：用于联调，避免误发邮件。
DRY_RUN=0

# ========= 监控时段 =========
# MONITOR_TZ：监控窗口所用时区。
MONITOR_TZ=Asia/Shanghai

# MONITOR_START / MONITOR_END：监控开始/结束时间（HH:MM）。
# 调宽：覆盖更长交易时段。调窄：更聚焦、额度消耗更低。
MONITOR_START=02:00
MONITOR_END=24:00

# ========= 策略窗口 =========
# LOW_WINDOW_MIN：局部低点窗口（分钟）。
# 调大：低点更平滑、反应更慢。调小：更敏感、噪音更多。
LOW_WINDOW_MIN=60

# SLOPE_WINDOW_MIN：斜率计算窗口（分钟）。
# 调大：趋势更稳定。调小：对短时波动更敏感。
SLOPE_WINDOW_MIN=5

# MIN_BARS_TO_START：最小起算样本数（条）。
# 调大：更稳但开盘/重启后更晚开始判断。调小：更早开始判断，但噪声可能增加。
MIN_BARS_TO_START=20

# QUANTILE_WINDOW_MIN：滚动分位窗口（分钟）。
# 调大：分位更稳健。调小：更“近视”，易受短时走势抬高/压低。
QUANTILE_WINDOW_MIN=300

# GLOBAL_WINDOW_MIN：全局锚点窗口（分钟），用于“绝对位置”过滤。
# 调大：更强调长期低位。调小：更容易放过高位回撤信号。
# 设 0 表示使用当前样本全长。
GLOBAL_WINDOW_MIN=1440

# ========= 分位与硬过滤 =========
# Q_LOW：低分位阈值（0~100）。
# 调大：更多点进入低位通道。调小：低位通道更严格。
Q_LOW=20

# Q_SKIP：高分位过滤阈值（0~100）。
# 调大：更少被“高位过滤”。调小：更严格防追高。
Q_SKIP=40

# ABSOLUTE_MAX_PRICE：绝对价格硬上限（与分位无关）。
# 当最新价 > 该值时直接不提醒；设 0 表示关闭该硬过滤。
ABSOLUTE_MAX_PRICE=0

# EARLY_NEAR_GLOBAL_LOW_PCT：接近全局低点阈值（百分比）。
# 调大：更多点被视为“近全局低点”。调小：更严格。
EARLY_NEAR_GLOBAL_LOW_PCT=0.10

# MAX_DIST_FROM_GLOBAL_LOW_PCT：全局低点评分锚值（百分比，不再硬过滤）。
# 调大：全局低点项更宽松。调小：全局低点项更严格。
MAX_DIST_FROM_GLOBAL_LOW_PCT=1

# MAX_DIST_FROM_SESSION_LOW_PCT：会话低点硬过滤阈值（百分比）。
# 调大：更不容易被过滤，信号更多。调小：更防追高，但可能漏掉回撤买点。
MAX_DIST_FROM_SESSION_LOW_PCT=1

# BUY_SESSION_LOW_GUARD_MAX_AGE_MIN：会话低点用于硬过滤时的最大“年龄”（分钟）。
# 若会话低点过老，则改用最近 BUY_SESSION_LOW_GUARD_LOOKBACK_MIN 分钟低点做过滤参考。
BUY_SESSION_LOW_GUARD_MAX_AGE_MIN=240

# BUY_SESSION_LOW_GUARD_LOOKBACK_MIN：会话低点过老时的回看窗口（分钟）。
BUY_SESSION_LOW_GUARD_LOOKBACK_MIN=240

# ========= 反弹与时效 =========
# REBOUND_PCT：最小反弹幅度阈值（百分比）。
# 调大：更保守，减少早报。调小：更早触发。
REBOUND_PCT=0.03

# REBOUND_MAX_PCT：反弹上限（百分比）。
# 调大：允许更深反弹后再报。调小：更防追高。
REBOUND_MAX_PCT=0.35

# LOW_MAX_AGE_MIN：局部低点“新鲜度”参考（分钟）。
# 调大：允许引用更久之前低点。调小：更强调“刚形成”的低点。
LOW_MAX_AGE_MIN=15

# ========= 停跌/动量 =========
# STALL_MIN：停跌参考分钟（积分项，不再是硬门槛）。
# 调大：更偏向确认后再报。调小：更容易提前报。
STALL_MIN=3

# MICRO_REBOUND_PCT：微反弹参考阈值（百分比，积分项）。
# 调大：需要更明显反弹。调小：更容易提前触发。
MICRO_REBOUND_PCT=0.03

# LOW_ZONE_SLOPE_MIN_PCT_PER_MIN：低位通道斜率参考阈值（%/min）。
# 调大：更要求拐头向上。调小（更负）：允许下跌中提前试探。
LOW_ZONE_SLOPE_MIN_PCT_PER_MIN=-0.003

# ========= 混合积分触发 =========
# EARLY_SCORE_THRESHOLD：低位提前通道触发分数阈值。
# 调大（如 80->85）：更少误报，但更易漏掉低点。调小：更早更频繁。
EARLY_SCORE_THRESHOLD=75

# ========= 开盘抢底通道 =========
# OPEN_SCOUT_MIN：会话开盘后抢底通道生效时长（分钟）。
# 调大：覆盖更长开盘时段，补开盘低点更强。调小：更保守。
OPEN_SCOUT_MIN=45

# OPEN_SCOUT_SCORE_THRESHOLD：开盘抢底通道分数阈值。
# 调大：更严格，误报更少。调小：更容易触发，漏报更少。
OPEN_SCOUT_SCORE_THRESHOLD=72

# OPEN_SCOUT_MAX_ALERTS_PER_SESSION：每个会话开盘抢底最多提醒次数。
# 调大：开盘提醒更多。调小：更克制（设 1 可避免开盘刷屏）。
OPEN_SCOUT_MAX_ALERTS_PER_SESSION=1

# ========= 卖出信号（可选，默认关闭） =========
# SELL_ENABLED：是否启用卖出提醒（1/0）。
SELL_ENABLED=0

# SELL_Q_HIGH：卖出高分位阈值（0~100），越大越偏顶部才考虑。
SELL_Q_HIGH=80

# SELL_Q_SKIP_LOW：卖出低分位过滤阈值（0~100），低于该分位直接不提醒卖出。
SELL_Q_SKIP_LOW=60

# SELL_ABSOLUTE_MIN_PRICE：卖出绝对价格下限，低于该值不提醒（0=关闭）。
SELL_ABSOLUTE_MIN_PRICE=0

# SELL_STALL_MIN：卖出停涨参考分钟（积分项）。
SELL_STALL_MIN=3

# SELL_MICRO_PULLBACK_PCT：卖出微回撤阈值（%）。
SELL_MICRO_PULLBACK_PCT=0.03

# SELL_NEAR_GLOBAL_HIGH_PCT：接近全局高点阈值（%）。
SELL_NEAR_GLOBAL_HIGH_PCT=0.10

# SELL_MAX_DIST_FROM_GLOBAL_HIGH_PCT：距全局高点评分锚值（%）。
SELL_MAX_DIST_FROM_GLOBAL_HIGH_PCT=1

# SELL_MAX_DIST_FROM_SESSION_HIGH_PCT：距会话高点硬过滤阈值（%）。
SELL_MAX_DIST_FROM_SESSION_HIGH_PCT=0.6

# SELL_PULLBACK_PCT：卖出最小回撤阈值（%）。
SELL_PULLBACK_PCT=0.03

# SELL_PULLBACK_MAX_PCT：卖出最大回撤阈值（%）。
SELL_PULLBACK_MAX_PCT=0.5

# SELL_HIGH_MAX_AGE_MIN：高点新鲜度参考（分钟）。
SELL_HIGH_MAX_AGE_MIN=15

# SELL_HIGH_ZONE_SLOPE_MAX_PCT_PER_MIN：高位提前通道斜率上限（%/min）。
SELL_HIGH_ZONE_SLOPE_MAX_PCT_PER_MIN=0.003

# SELL_HTF_SLOPE_WINDOW_MIN：卖出高周期斜率窗口（分钟，<=1 关闭该过滤）。
SELL_HTF_SLOPE_WINDOW_MIN=60

# SELL_HTF_SLOPE_MAX_PCT_PER_MIN：卖出高周期斜率上限（%/min）。
# 当前高周期斜率高于该阈值时，判定上升趋势过强，直接过滤卖出。
SELL_HTF_SLOPE_MAX_PCT_PER_MIN=0.01

# SELL_REARM_ON_NEW_HIGH_PCT：卖出“新高重置”阈值（%）。
# 同一会话内两次卖出之间，要求会话高点至少再创新高这么多，避免连续密集卖出。
SELL_REARM_ON_NEW_HIGH_PCT=0.10

# SELL_EARLY_SCORE_THRESHOLD：卖出高位提前通道积分阈值。
SELL_EARLY_SCORE_THRESHOLD=80

# SELL_OPEN_SCOUT_MIN：卖出开盘通道生效时长（分钟）。
SELL_OPEN_SCOUT_MIN=0

# SELL_OPEN_SCOUT_SCORE_THRESHOLD：卖出开盘通道积分阈值。
SELL_OPEN_SCOUT_SCORE_THRESHOLD=72

# SELL_OPEN_SCOUT_MAX_ALERTS_PER_SESSION：卖出开盘通道每会话最多提醒次数。
SELL_OPEN_SCOUT_MAX_ALERTS_PER_SESSION=1

# ========= 实时提醒附图 =========
# ALERT_PLOT_ON_EMAIL：邮件是否附带本次实时 alert 图（1/0）。
ALERT_PLOT_ON_EMAIL=1

# ALERT_PLOT_DIR：实时 alert 图输出目录。
ALERT_PLOT_DIR=alert_out

# ========= SMTP 邮件 =========
# SMTP_HOST：SMTP 服务器地址，这里用 qq 邮箱。

SMTP_HOST=smtp.qq.com
SMTP_PORT=465
SMTP_SSL=1
SMTP_STARTTLS=0
# SMTP_USER：SMTP 登录用户名（通常邮箱地址）。
SMTP_USER=your@qq.com

# SMTP_PASSWORD：SMTP 授权码/应用密码（不要用网页登录密码）。
SMTP_PASSWORD=YOUR_SMTP_APP_PASSWORD

# SMTP_FROM：发件人地址。
SMTP_FROM=your@qq.com

# SMTP_TO：收件人列表（英文逗号分隔）。
SMTP_TO=xx1@qq.com,xx2@qq.com
